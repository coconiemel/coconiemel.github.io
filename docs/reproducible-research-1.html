<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Reproducible Research (1) | Portfolio</title>
  <meta name="description" content="Reproducible Research (1) | Portfolio" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Reproducible Research (1) | Portfolio" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Reproducible Research (1) | Portfolio" />
  
  
  

<meta name="author" content="Coco Niemel" />


<meta name="date" content="2023-01-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data-management-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Curriculum Vitae</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact-information"><i class="fa fa-check"></i>Contact information</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#education"><i class="fa fa-check"></i>Education</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#professional-experience"><i class="fa fa-check"></i>Professional Experience</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#languages"><i class="fa fa-check"></i>Languages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html"><i class="fa fa-check"></i>Reproducible Research (1)</a>
<ul>
<li class="chapter" data-level="" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#the-analyzation-of-a-file"><i class="fa fa-check"></i>The analyzation of a file</a></li>
<li class="chapter" data-level="" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#scoring-reproducibility"><i class="fa fa-check"></i>Scoring reproducibility</a></li>
<li class="chapter" data-level="" data-path="reproducible-research-1.html"><a href="reproducible-research-1.html#usage-of-other-peoples-codes"><i class="fa fa-check"></i>Usage of other peoples codes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-management-2.html"><a href="data-management-2.html"><i class="fa fa-check"></i>Data management (2)</a></li>
<li class="chapter" data-level="" data-path="free-future-assignment-3.html"><a href="free-future-assignment-3.html"><i class="fa fa-check"></i>Free future assignment (3)</a>
<ul>
<li class="chapter" data-level="" data-path="free-future-assignment-3.html"><a href="free-future-assignment-3.html#introduction-1"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="free-future-assignment-3.html"><a href="free-future-assignment-3.html#plan"><i class="fa fa-check"></i>Plan</a></li>
<li class="chapter" data-level="" data-path="free-future-assignment-3.html"><a href="free-future-assignment-3.html#a-phylogenetic-analysis"><i class="fa fa-check"></i>A phylogenetic analysis</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction-groupproject-5.html"><a href="introduction-groupproject-5.html"><i class="fa fa-check"></i>Introduction groupproject (5)</a>
<ul>
<li class="chapter" data-level="" data-path="introduction-groupproject-5.html"><a href="introduction-groupproject-5.html#ontox"><i class="fa fa-check"></i>ONTOX</a></li>
<li class="chapter" data-level="" data-path="introduction-groupproject-5.html"><a href="introduction-groupproject-5.html#our-addition"><i class="fa fa-check"></i>Our addition</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html"><i class="fa fa-check"></i>Relational data and databases (7)</a>
<ul>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#introduction-2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#dbeaver-connection"><i class="fa fa-check"></i>DBeaver connection</a></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#inspection"><i class="fa fa-check"></i>Inspection</a></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#descriptive-statistics"><i class="fa fa-check"></i>Descriptive statistics</a></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#visualisations"><i class="fa fa-check"></i>Visualisations</a>
<ul>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#flu"><i class="fa fa-check"></i>Flu</a></li>
<li class="chapter" data-level="" data-path="relational-data-and-databases-7.html"><a href="relational-data-and-databases-7.html#dengue"><i class="fa fa-check"></i>Dengue</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-packages-8.html"><a href="r-packages-8.html"><i class="fa fa-check"></i>R packages (8)</a>
<ul>
<li class="chapter" data-level="" data-path="r-packages-8.html"><a href="r-packages-8.html#introduction-3"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="r-packages-8.html"><a href="r-packages-8.html#copopa"><i class="fa fa-check"></i>Copopa</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-parameters-9.html"><a href="rmarkdown-parameters-9.html"><i class="fa fa-check"></i>Rmarkdown parameters (9)</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reproducible-research-1" class="section level1 unnumbered hasAnchor">
<h1>Reproducible Research (1)<a href="reproducible-research-1.html#reproducible-research-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introduction" class="section level2 unnumbered hasAnchor">
<h2>Introduction<a href="reproducible-research-1.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>During this assignment I learned to search and analyze different types of reproducible data.</p>
</div>
<div id="the-analyzation-of-a-file" class="section level2 unnumbered hasAnchor">
<h2>The analyzation of a file<a href="reproducible-research-1.html#the-analyzation-of-a-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The experiment used for this analysis was obtained from an experiment in which adult C. elegans was exposed to varying concentrations of different compounds. The data for this experiment is supplied by J. Louter (INT/ILC).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="reproducible-research-1.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Used libraries in this exercise.</span></span>
<span id="cb1-2"><a href="reproducible-research-1.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="reproducible-research-1.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>The experiment contains a Excel file called CE.LIQ.FLOW.062_Tidydata.xlsx. During analyzation of this file I noticed that under ‘compVehicle’ the negative and positive seems to be alike, apart from the concentration. Negative is a higher concentration with ethanol and positive is a lower concentration with a variation of things.
The summary of the file tells the positive control is ethanol and the negative control is S medium.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="reproducible-research-1.html#cb2-1" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span> <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;files/CE.LIQ.FLOW.062_Tidydata.xlsx&quot;</span>) </span>
<span id="cb2-2"><a href="reproducible-research-1.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># redownload file into server</span></span></code></pre></div>
<p>When importing and opening the file in R I checked the datatypes, as shown below these were not assigned correctly.
RawData should be integer, because it contains full numbers.
CompName should be factor, because the names can be changed with numbers and get sorted by.
CompConcentration should be double, because it contains decimals.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="reproducible-research-1.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check data types.</span></span>
<span id="cb3-2"><a href="reproducible-research-1.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>RawData) <span class="co"># double</span></span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="reproducible-research-1.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compName) <span class="co"># character </span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="reproducible-research-1.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compConcentration) <span class="co"># character</span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>To keep working with the file, I changed the datatypes to the correct ones. After this plotting was possible. The scatterplot shows the log10 of the concentration of different compounds in the C. elegans offspring count.
The correction with log10 was necessary because the labels of the x-axis were overlapping each other, the values had a large number of decimals and were randomly positioned.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="reproducible-research-1.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn raw data into integer datatype.</span></span>
<span id="cb9-2"><a href="reproducible-research-1.html#cb9-2" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>RawData <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>RawData)</span>
<span id="cb9-3"><a href="reproducible-research-1.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="reproducible-research-1.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn comp name into factor.</span></span>
<span id="cb9-5"><a href="reproducible-research-1.html#cb9-5" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compName <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compName)</span>
<span id="cb9-6"><a href="reproducible-research-1.html#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="reproducible-research-1.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn comp concentration into double (numeric value).</span></span>
<span id="cb9-8"><a href="reproducible-research-1.html#cb9-8" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compConcentration <span class="ot">&lt;-</span> <span class="fu">as.double</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compConcentration)</span>
<span id="cb9-9"><a href="reproducible-research-1.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="reproducible-research-1.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check data types again.</span></span>
<span id="cb9-11"><a href="reproducible-research-1.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>RawData) <span class="co"># integer</span></span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="reproducible-research-1.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compName) <span class="co"># factor</span></span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="reproducible-research-1.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(CE.LIQ.FLOW<span class="fl">.062</span><span class="sc">$</span>compConcentration) <span class="co"># numeric</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="reproducible-research-1.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct!</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="reproducible-research-1.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtain needed columns.</span></span>
<span id="cb16-2"><a href="reproducible-research-1.html#cb16-2" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span>_summary <span class="ot">&lt;-</span> CE.LIQ.FLOW<span class="fl">.062</span> <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="reproducible-research-1.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(compName, compConcentration, expType) <span class="sc">%&gt;%</span>                          </span>
<span id="cb16-4"><a href="reproducible-research-1.html#cb16-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="fu">summarize</span>(<span class="at">mean_counts =</span> <span class="fu">mean</span>(RawData, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-5"><a href="reproducible-research-1.html#cb16-5" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">sd_counts =</span>  <span class="fu">sd</span>(RawData, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),)</span>
<span id="cb16-6"><a href="reproducible-research-1.html#cb16-6" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span>_summary_tbl <span class="ot">&lt;-</span> CE.LIQ.FLOW<span class="fl">.062</span>_summary <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="reproducible-research-1.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(expType <span class="sc">==</span> <span class="st">&quot;experiment&quot;</span>)</span>
<span id="cb16-8"><a href="reproducible-research-1.html#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="reproducible-research-1.html#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot.</span></span>
<span id="cb16-10"><a href="reproducible-research-1.html#cb16-10" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span>_summary_tbl <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log10</span>(compConcentration), </span>
<span id="cb16-11"><a href="reproducible-research-1.html#cb16-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">y =</span> mean_counts)) <span class="sc">+</span></span>
<span id="cb16-12"><a href="reproducible-research-1.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> compName, <span class="at">shape =</span> expType), <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb16-13"><a href="reproducible-research-1.html#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.5</span>, <span class="at">seed =</span> <span class="dv">123</span>)) <span class="sc">+</span></span>
<span id="cb16-14"><a href="reproducible-research-1.html#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>mean_counts<span class="sc">-</span>sd_counts, <span class="at">ymax=</span>mean_counts<span class="sc">+</span>sd_counts, </span>
<span id="cb16-15"><a href="reproducible-research-1.html#cb16-15" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color =</span> compName), <span class="at">width=</span> <span class="fl">0.2</span>, </span>
<span id="cb16-16"><a href="reproducible-research-1.html#cb16-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.5</span>, <span class="at">seed =</span> <span class="dv">123</span>))<span class="sc">+</span></span>
<span id="cb16-17"><a href="reproducible-research-1.html#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Mean counts C. elegans offspring in various concentrations&quot;</span>,</span>
<span id="cb16-18"><a href="reproducible-research-1.html#cb16-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Log10 of compound concentration&quot;</span>,</span>
<span id="cb16-19"><a href="reproducible-research-1.html#cb16-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;C. elegans offspring count&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-20"><a href="reproducible-research-1.html#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) </span></code></pre></div>
<p><img src="portfolio_book_files/figure-html/create%20plot-1.png" width="672" /></p>
<p>For further analysation of the effect i would start by testing normality by performing a Shapiro-Wilk test. If unusual, i would normalize the data, if normal, i would start an ANOVA between de different conditions. I would end with the post-hoc tests, to check in what combination of groups the difference is.</p>
<p>In this case, the data is not normal, so normalization is necessary.
The normalization step is to see is the offspring count increases or decreases relatively to the negative control and so, if there is anything influenced by the negative control.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="reproducible-research-1.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Viewing CE.LIQ.FLOW.062_summary shows the mean value of controlNegative = 85.9.</span></span>
<span id="cb17-2"><a href="reproducible-research-1.html#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="reproducible-research-1.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the column with normalized average counts</span></span>
<span id="cb17-4"><a href="reproducible-research-1.html#cb17-4" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span>_summary_norm <span class="ot">&lt;-</span> CE.LIQ.FLOW<span class="fl">.062</span>_summary_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="reproducible-research-1.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_counts =</span> mean_counts<span class="sc">/</span><span class="fl">85.9</span>, <span class="at">norm_sd =</span> sd_counts<span class="sc">/</span><span class="fl">85.9</span>)</span>
<span id="cb17-6"><a href="reproducible-research-1.html#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="reproducible-research-1.html#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot with normalized data.</span></span>
<span id="cb17-8"><a href="reproducible-research-1.html#cb17-8" aria-hidden="true" tabindex="-1"></a>CE.LIQ.FLOW<span class="fl">.062</span>_summary_norm <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log10</span>(compConcentration), </span>
<span id="cb17-9"><a href="reproducible-research-1.html#cb17-9" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">y =</span> norm_counts)) <span class="sc">+</span></span>
<span id="cb17-10"><a href="reproducible-research-1.html#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> compName, <span class="at">shape =</span> expType), <span class="at">size =</span> <span class="dv">2</span>, </span>
<span id="cb17-11"><a href="reproducible-research-1.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.5</span>, <span class="at">seed =</span> <span class="dv">150</span>)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="reproducible-research-1.html#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>norm_counts<span class="sc">-</span>norm_sd, <span class="at">ymax=</span>norm_counts<span class="sc">+</span>norm_sd, </span>
<span id="cb17-13"><a href="reproducible-research-1.html#cb17-13" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color =</span> compName), <span class="at">width=</span> <span class="fl">0.2</span>, </span>
<span id="cb17-14"><a href="reproducible-research-1.html#cb17-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.5</span>, <span class="at">seed =</span> <span class="dv">150</span>))<span class="sc">+</span></span>
<span id="cb17-15"><a href="reproducible-research-1.html#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Mean counts C. elegans offspring in various concentrations&quot;</span>,</span>
<span id="cb17-16"><a href="reproducible-research-1.html#cb17-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Normalized to negative control = 1&quot;</span>,</span>
<span id="cb17-17"><a href="reproducible-research-1.html#cb17-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Log10 of compound concentration&quot;</span>,</span>
<span id="cb17-18"><a href="reproducible-research-1.html#cb17-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;C. elegans offspring count&quot;</span>) <span class="sc">+</span></span>
<span id="cb17-19"><a href="reproducible-research-1.html#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) </span></code></pre></div>
<p><img src="portfolio_book_files/figure-html/normalize%20data-1.png" width="672" /></p>
</div>
<div id="scoring-reproducibility" class="section level2 unnumbered hasAnchor">
<h2>Scoring reproducibility<a href="reproducible-research-1.html#scoring-reproducibility" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The next analysis is based on an article that addresses if meaningless novel words in linguistic contexts can achieve emotional connotations and whether these connotations can affect the quality of word learning and retention <span class="citation">(<a href="#ref-snefjellaHowEmotionLearned2020" role="doc-biblioref">Snefjella, Lana, and Kuperman 2020</a>)</span>.</p>
<p>There is a lot of language research concerning the human capacity for learning new words, though this research is by far not complete yet. Because of that, the goal of this paper is to add to this research field.</p>
<p>To answer these questions, five experiments were set up. three groups of L1 speakers of the English language had to learn nine novel words in a consistently positive, neutral or negative context. During the learning phase, reading times were recorded. Immediately after and one week after, vocabulary post-test were administered to assess learning and retention.</p>
<p>The results showed that for both research questions two out of three groups learned the forms, definitional meanings en emotional connotations and that de positive group learned the best out of the three groups.</p>
<p>Part of this analyzation is a scoring on the basis of the “Repita” criteria. This is a method for identifying reproductibility issues in a scientific publication <span class="citation">(<a href="#ref-sumnerReproducibilityReportingPractices2020" role="doc-biblioref"><strong>sumnerReproducibilityReportingPractices2020?</strong></a>)</span>. The scoring is shown below.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reproducible-research-1.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create matrix</span></span>
<span id="cb18-2"><a href="reproducible-research-1.html#cb18-2" aria-hidden="true" tabindex="-1"></a>repita_criteria_tab <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="st">&quot;Study purpose&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;Data availability statement&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;Data location&quot;</span>, <span class="st">&quot;Online version&quot;</span>, <span class="st">&quot;Study location&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;Author review&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;Ethics statement&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;Funding statement&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;Code availability&quot;</span>, <span class="st">&quot;X&quot;</span>), <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>)</span>
<span id="cb18-3"><a href="reproducible-research-1.html#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="reproducible-research-1.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define names of matrix</span></span>
<span id="cb18-5"><a href="reproducible-research-1.html#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(repita_criteria_tab) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Transparency criteria&#39;</span>, <span class="st">&#39;Score&#39;</span>)</span>
<span id="cb18-6"><a href="reproducible-research-1.html#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="reproducible-research-1.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert matrix to table </span></span>
<span id="cb18-8"><a href="reproducible-research-1.html#cb18-8" aria-hidden="true" tabindex="-1"></a>repita_criteria_tab <span class="ot">&lt;-</span> <span class="fu">as.table</span>(repita_criteria_tab)</span>
<span id="cb18-9"><a href="reproducible-research-1.html#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="reproducible-research-1.html#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># View table </span></span>
<span id="cb18-11"><a href="reproducible-research-1.html#cb18-11" aria-hidden="true" tabindex="-1"></a>repita_criteria_tab</span></code></pre></div>
<pre><code>##   Transparency criteria       Score         
## A Study purpose               V             
## B Data availability statement V             
## C Data location               Online version
## D Study location              USA           
## E Author review               V             
## F Ethics statement            V             
## G Funding statement           V             
## H Code availability           X</code></pre>
</div>
<div id="usage-of-other-peoples-codes" class="section level2 unnumbered hasAnchor">
<h2>Usage of other peoples codes<a href="reproducible-research-1.html#usage-of-other-peoples-codes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The last analyzation contains a code of an article about the case-fatality rate of COVID-19 <span class="citation">(<a href="#ref-dudelMonitoringTrendsDifferences2020" role="doc-biblioref">Dudel et al. 2020</a>)</span>.</p>
<p>Looking at the code, is seems to achieve a visualisation of the differences in case-fatality rate (CFR) over time in between countries, using the age structure of infection and age specific CFRs. This is done by creating tables containing the latest data of diagnosed cases and death counts (concerning COVID-19) for each country.</p>
<p>The readability of the code is quite alright. The code in general is readable and understandable because of comments en different chuncks. But the total code is quite long and stored in different files, which makes it a little bit harder to access and run.</p>
<p>But after trying the code myself the code was a little less accesible as i thought. At first it took a lot of effort, because the file in the url didn’t exist anymore and I couldn’t figure out the updated pathway. The updated pathway was not clearly indicated, but once I found it the reproduction was pretty smooth and I only had to make small changes.</p>
<p>The code is stated below, showing comments of parts i have changed to make the code run smoothly.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="reproducible-research-1.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Load packages #############################################################</span></span>
<span id="cb20-2"><a href="reproducible-research-1.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="reproducible-research-1.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="do">## I put al the libraries together here, instead of using &#39;source&#39; per chunck for a better overview.</span></span>
<span id="cb20-4"><a href="reproducible-research-1.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="reproducible-research-1.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(tidyverse)</span>
<span id="cb20-6"><a href="reproducible-research-1.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(data.table)</span>
<span id="cb20-7"><a href="reproducible-research-1.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(writexl)</span>
<span id="cb20-8"><a href="reproducible-research-1.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(httr)</span>
<span id="cb20-9"><a href="reproducible-research-1.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(ggrepel)</span>
<span id="cb20-10"><a href="reproducible-research-1.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(scales)</span>
<span id="cb20-11"><a href="reproducible-research-1.html#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="reproducible-research-1.html#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="reproducible-research-1.html#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="do">### Case fatality rate #######################################################</span></span>
<span id="cb20-14"><a href="reproducible-research-1.html#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="reproducible-research-1.html#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cc = case-age distribution</span></span>
<span id="cb20-16"><a href="reproducible-research-1.html#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rr = age-specific case fatality rates</span></span>
<span id="cb20-17"><a href="reproducible-research-1.html#cb20-17" aria-hidden="true" tabindex="-1"></a>  cfr <span class="ot">&lt;-</span> <span class="cf">function</span>(cc,rr){</span>
<span id="cb20-18"><a href="reproducible-research-1.html#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(cc <span class="sc">*</span> rr)</span>
<span id="cb20-19"><a href="reproducible-research-1.html#cb20-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb20-20"><a href="reproducible-research-1.html#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="reproducible-research-1.html#cb20-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-22"><a href="reproducible-research-1.html#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="do">### Kitagawa decomposition ####################################################</span></span>
<span id="cb20-23"><a href="reproducible-research-1.html#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="reproducible-research-1.html#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># c1 = Age distribution population 1</span></span>
<span id="cb20-25"><a href="reproducible-research-1.html#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># r1 = Case fatality rates population 1</span></span>
<span id="cb20-26"><a href="reproducible-research-1.html#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># c2 = Age distribution population 2</span></span>
<span id="cb20-27"><a href="reproducible-research-1.html#cb20-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># r2 = Case fatality rates population 2</span></span>
<span id="cb20-28"><a href="reproducible-research-1.html#cb20-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-29"><a href="reproducible-research-1.html#cb20-29" aria-hidden="true" tabindex="-1"></a>  kitagawa_cfr <span class="ot">&lt;-</span> <span class="cf">function</span>(c1, r1, c2, r2){</span>
<span id="cb20-30"><a href="reproducible-research-1.html#cb20-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-31"><a href="reproducible-research-1.html#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate age-distribution of cases</span></span>
<span id="cb20-32"><a href="reproducible-research-1.html#cb20-32" aria-hidden="true" tabindex="-1"></a>    c1  <span class="ot">&lt;-</span> c1 <span class="sc">/</span> <span class="fu">sum</span>(c1)</span>
<span id="cb20-33"><a href="reproducible-research-1.html#cb20-33" aria-hidden="true" tabindex="-1"></a>    c2  <span class="ot">&lt;-</span> c2 <span class="sc">/</span> <span class="fu">sum</span>(c2)</span>
<span id="cb20-34"><a href="reproducible-research-1.html#cb20-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-35"><a href="reproducible-research-1.html#cb20-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Total difference</span></span>
<span id="cb20-36"><a href="reproducible-research-1.html#cb20-36" aria-hidden="true" tabindex="-1"></a>    Tot <span class="ot">&lt;-</span> <span class="fu">cfr</span>(c1, r1) <span class="sc">-</span> <span class="fu">cfr</span>(c2, r2)</span>
<span id="cb20-37"><a href="reproducible-research-1.html#cb20-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-38"><a href="reproducible-research-1.html#cb20-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Age component</span></span>
<span id="cb20-39"><a href="reproducible-research-1.html#cb20-39" aria-hidden="true" tabindex="-1"></a>    Aa  <span class="ot">&lt;-</span> <span class="fu">sum</span>((c1 <span class="sc">-</span> c2) <span class="sc">*</span> (r1 <span class="sc">+</span> r2) <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb20-40"><a href="reproducible-research-1.html#cb20-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-41"><a href="reproducible-research-1.html#cb20-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Case fatality component</span></span>
<span id="cb20-42"><a href="reproducible-research-1.html#cb20-42" aria-hidden="true" tabindex="-1"></a>    Bb  <span class="ot">&lt;-</span> <span class="fu">sum</span>((r1 <span class="sc">-</span> r2) <span class="sc">*</span> (c1 <span class="sc">+</span> c2) <span class="sc">/</span> <span class="dv">2</span>)</span>
<span id="cb20-43"><a href="reproducible-research-1.html#cb20-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-44"><a href="reproducible-research-1.html#cb20-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Output</span></span>
<span id="cb20-45"><a href="reproducible-research-1.html#cb20-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">Diff =</span> Tot, </span>
<span id="cb20-46"><a href="reproducible-research-1.html#cb20-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">AgeComp =</span> Aa,</span>
<span id="cb20-47"><a href="reproducible-research-1.html#cb20-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">RateComp =</span> Bb, </span>
<span id="cb20-48"><a href="reproducible-research-1.html#cb20-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">CFR1 =</span> <span class="fu">weighted.mean</span>(r1,c1), </span>
<span id="cb20-49"><a href="reproducible-research-1.html#cb20-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">CFR2 =</span> <span class="fu">weighted.mean</span>(r2,c2))</span>
<span id="cb20-50"><a href="reproducible-research-1.html#cb20-50" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="reproducible-research-1.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## This whole chunck doesn&#39;t work anymore because the file in the url has been deleted by the owner. Instead of this file, a file in the given data, named &quot;inputdata.csv&quot;, will be used. Because of this, the chunck will not be executed (eval = false).</span></span>
<span id="cb21-2"><a href="reproducible-research-1.html#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="reproducible-research-1.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Required packages</span></span>
<span id="cb21-4"><a href="reproducible-research-1.html#cb21-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">source</span>((<span class="st">&quot;00_functions.R&quot;</span>))</span>
<span id="cb21-5"><a href="reproducible-research-1.html#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="reproducible-research-1.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># URL + filename</span></span>
<span id="cb21-7"><a href="reproducible-research-1.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="st">&#39;https://osf.io/wu5ve//?action=download&#39;</span></span>
<span id="cb21-8"><a href="reproducible-research-1.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  filename <span class="ot">&lt;-</span> <span class="st">&#39;Data/Output_10.csv&#39;</span></span>
<span id="cb21-9"><a href="reproducible-research-1.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-10"><a href="reproducible-research-1.html#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load data</span></span>
<span id="cb21-11"><a href="reproducible-research-1.html#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>(url, <span class="fu">write_disk</span>(filename, <span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb21-12"><a href="reproducible-research-1.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(filename,<span class="at">skip=</span><span class="dv">3</span>)</span>
<span id="cb21-13"><a href="reproducible-research-1.html#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="reproducible-research-1.html#cb21-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-15"><a href="reproducible-research-1.html#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="do">### Edit data (select countries, etc.) ########################################</span></span>
<span id="cb21-16"><a href="reproducible-research-1.html#cb21-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-17"><a href="reproducible-research-1.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Lists of countries and regions</span></span>
<span id="cb21-18"><a href="reproducible-research-1.html#cb21-18" aria-hidden="true" tabindex="-1"></a>  countrylist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;China&quot;</span>,<span class="st">&quot;Germany&quot;</span>,<span class="st">&quot;Italy&quot;</span>,<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Spain&quot;</span>,<span class="st">&quot;USA&quot;</span>)</span>
<span id="cb21-19"><a href="reproducible-research-1.html#cb21-19" aria-hidden="true" tabindex="-1"></a>  region <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;All&quot;</span>,<span class="st">&quot;NYC&quot;</span>)</span>
<span id="cb21-20"><a href="reproducible-research-1.html#cb21-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-21"><a href="reproducible-research-1.html#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Restrict</span></span>
<span id="cb21-22"><a href="reproducible-research-1.html#cb21-22" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country <span class="sc">%in%</span> countrylist <span class="sc">&amp;</span> Region <span class="sc">%in%</span> region)</span>
<span id="cb21-23"><a href="reproducible-research-1.html#cb21-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-24"><a href="reproducible-research-1.html#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove Tests variable</span></span>
<span id="cb21-25"><a href="reproducible-research-1.html#cb21-25" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Tests=</span><span class="cn">NULL</span>)</span>
<span id="cb21-26"><a href="reproducible-research-1.html#cb21-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-27"><a href="reproducible-research-1.html#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop if no cases/Deaths</span></span>
<span id="cb21-28"><a href="reproducible-research-1.html#cb21-28" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dat)</span>
<span id="cb21-29"><a href="reproducible-research-1.html#cb21-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-30"><a href="reproducible-research-1.html#cb21-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-31"><a href="reproducible-research-1.html#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="do">### Save ######################################################################</span></span>
<span id="cb21-32"><a href="reproducible-research-1.html#cb21-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-33"><a href="reproducible-research-1.html#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(dat,<span class="at">path=</span><span class="st">&quot;Data/inputdata.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reproducible-research-1.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Load functions &amp; packages #################################################</span></span>
<span id="cb22-2"><a href="reproducible-research-1.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="reproducible-research-1.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Not necessary anymore, all the libraries are stored together above.</span></span>
<span id="cb22-4"><a href="reproducible-research-1.html#cb22-4" aria-hidden="true" tabindex="-1"></a> <span class="do">## source((&quot;00_functions.R&quot;)) </span></span>
<span id="cb22-5"><a href="reproducible-research-1.html#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="reproducible-research-1.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="reproducible-research-1.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="do">### Load and edit data ########################################################</span></span>
<span id="cb22-8"><a href="reproducible-research-1.html#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="reproducible-research-1.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load CSV file</span></span>
<span id="cb22-10"><a href="reproducible-research-1.html#cb22-10" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/COVID_article/inputdata.csv&quot;</span>)</span>
<span id="cb22-11"><a href="reproducible-research-1.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-12"><a href="reproducible-research-1.html#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set Date as date</span></span>
<span id="cb22-13"><a href="reproducible-research-1.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  dat<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(dat<span class="sc">$</span>Date,<span class="st">&quot;%d.%m.%y&quot;</span>)</span>
<span id="cb22-14"><a href="reproducible-research-1.html#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="reproducible-research-1.html#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find max dates</span></span>
<span id="cb22-16"><a href="reproducible-research-1.html#cb22-16" aria-hidden="true" tabindex="-1"></a>  maxdates <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb22-17"><a href="reproducible-research-1.html#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> </span>
<span id="cb22-18"><a href="reproducible-research-1.html#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">maxdate=</span><span class="fu">max</span>(Date))</span>
<span id="cb22-19"><a href="reproducible-research-1.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-20"><a href="reproducible-research-1.html#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get least common denominator</span></span>
<span id="cb22-21"><a href="reproducible-research-1.html#cb22-21" aria-hidden="true" tabindex="-1"></a>  maxdate <span class="ot">&lt;-</span> maxdates <span class="sc">%&gt;%</span> </span>
<span id="cb22-22"><a href="reproducible-research-1.html#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Country<span class="sc">!=</span><span class="st">&quot;China&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-23"><a href="reproducible-research-1.html#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-24"><a href="reproducible-research-1.html#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="fu">min</span>(maxdate))</span>
<span id="cb22-25"><a href="reproducible-research-1.html#cb22-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-26"><a href="reproducible-research-1.html#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># As vector</span></span>
<span id="cb22-27"><a href="reproducible-research-1.html#cb22-27" aria-hidden="true" tabindex="-1"></a>  maxdate <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(maxdate)[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb22-28"><a href="reproducible-research-1.html#cb22-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-29"><a href="reproducible-research-1.html#cb22-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-30"><a href="reproducible-research-1.html#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="do">### Numbers for Table 1 #######################################################</span></span>
<span id="cb22-31"><a href="reproducible-research-1.html#cb22-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-32"><a href="reproducible-research-1.html#cb22-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Latest date: maxdate</span></span>
<span id="cb22-33"><a href="reproducible-research-1.html#cb22-33" aria-hidden="true" tabindex="-1"></a>  refdate <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;30.06.2020&quot;</span>,<span class="st">&quot;%d.%m.%Y&quot;</span>)</span>
<span id="cb22-34"><a href="reproducible-research-1.html#cb22-34" aria-hidden="true" tabindex="-1"></a>  dat2 <span class="ot">&lt;-</span> dat  <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date<span class="sc">&lt;=</span>refdate) <span class="co">#maxdate</span></span>
<span id="cb22-35"><a href="reproducible-research-1.html#cb22-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-36"><a href="reproducible-research-1.html#cb22-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aggregate case and death counts</span></span>
<span id="cb22-37"><a href="reproducible-research-1.html#cb22-37" aria-hidden="true" tabindex="-1"></a>  cases <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Cases<span class="sc">~</span>Code<span class="sc">+</span>Date<span class="sc">+</span>Country<span class="sc">+</span>Region,<span class="at">data=</span>dat2[dat2<span class="sc">$</span>Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>,],sum) </span>
<span id="cb22-38"><a href="reproducible-research-1.html#cb22-38" aria-hidden="true" tabindex="-1"></a>  deaths <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Deaths<span class="sc">~</span>Code<span class="sc">+</span>Date<span class="sc">+</span>Country<span class="sc">+</span>Region,<span class="at">data=</span>dat2[dat2<span class="sc">$</span>Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>,],sum)</span>
<span id="cb22-39"><a href="reproducible-research-1.html#cb22-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-40"><a href="reproducible-research-1.html#cb22-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Most recent counts</span></span>
<span id="cb22-41"><a href="reproducible-research-1.html#cb22-41" aria-hidden="true" tabindex="-1"></a>  cases <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">which.max</span>(Date))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 5
## # Groups:   Country, Region [7]
##   Code             Date       Country     Region    Cases
##   &lt;chr&gt;            &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;
## 1 CN11.02.2020     2020-02-11 China       All      44672 
## 2 DE_30.06.2020    2020-06-30 Germany     All     194877.
## 3 ITbol30.06.2020  2020-06-30 Italy       All     240455 
## 4 KR30.06.2020     2020-06-30 South Korea All      12800 
## 5 ES21.05.2020     2020-05-21 Spain       All     234824.
## 6 US27.06.2020     2020-06-27 USA         All    2504175.
## 7 US_NYC30.06.2020 2020-06-30 USA         NYC     212072.</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="reproducible-research-1.html#cb24-1" aria-hidden="true" tabindex="-1"></a>  deaths <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">which.max</span>(Date))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 5
## # Groups:   Country, Region [7]
##   Code             Date       Country     Region  Deaths
##   &lt;chr&gt;            &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;
## 1 CN11.02.2020     2020-02-11 China       All      1023.
## 2 DE_30.06.2020    2020-06-30 Germany     All      9078 
## 3 ITbol30.06.2020  2020-06-30 Italy       All     33736 
## 4 KR30.06.2020     2020-06-30 South Korea All       282 
## 5 ES21.05.2020     2020-05-21 Spain       All     28628.
## 6 US27.06.2020     2020-06-27 USA         All    124541 
## 7 US_NYC30.06.2020 2020-06-30 USA         NYC     18492</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="reproducible-research-1.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Analysis for Table 2 (and appendix) #######################################</span></span>
<span id="cb26-2"><a href="reproducible-research-1.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-3"><a href="reproducible-research-1.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate ASFRs</span></span>
<span id="cb26-4"><a href="reproducible-research-1.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">ascfr =</span> Deaths <span class="sc">/</span> Cases,</span>
<span id="cb26-5"><a href="reproducible-research-1.html#cb26-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ascfr =</span> <span class="fu">replace_na</span>(ascfr, <span class="dv">0</span>))</span>
<span id="cb26-6"><a href="reproducible-research-1.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-7"><a href="reproducible-research-1.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get codes for reference countries</span></span>
<span id="cb26-8"><a href="reproducible-research-1.html#cb26-8" aria-hidden="true" tabindex="-1"></a>  maxdate <span class="ot">&lt;-</span> <span class="fu">format.Date</span>(maxdate,<span class="st">&quot;%d.%m.%Y&quot;</span>)</span>
<span id="cb26-9"><a href="reproducible-research-1.html#cb26-9" aria-hidden="true" tabindex="-1"></a>  refdate <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;30.06.2020&quot;</span>,<span class="st">&quot;%d.%m.%Y&quot;</span>)</span>
<span id="cb26-10"><a href="reproducible-research-1.html#cb26-10" aria-hidden="true" tabindex="-1"></a>  refdate2 <span class="ot">&lt;-</span> <span class="fu">format.Date</span>(refdate,<span class="st">&quot;%d.%m.%Y&quot;</span>)<span class="co">#maxdate</span></span>
<span id="cb26-11"><a href="reproducible-research-1.html#cb26-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-12"><a href="reproducible-research-1.html#cb26-12" aria-hidden="true" tabindex="-1"></a>  DE_code <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;DE_&quot;</span>,refdate2)<span class="co">#paste0(&quot;DE_&quot;,maxdate)</span></span>
<span id="cb26-13"><a href="reproducible-research-1.html#cb26-13" aria-hidden="true" tabindex="-1"></a>  IT_code <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;ITbol&quot;</span>,refdate2)<span class="co">#paste0(&quot;ITinfo&quot;,maxdate)</span></span>
<span id="cb26-14"><a href="reproducible-research-1.html#cb26-14" aria-hidden="true" tabindex="-1"></a>  SK_code <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;KR&quot;</span>,refdate2)<span class="co">#paste0(&quot;SK&quot;,maxdate)</span></span>
<span id="cb26-15"><a href="reproducible-research-1.html#cb26-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-16"><a href="reproducible-research-1.html#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Decide some reference patterns (For main text: SK)</span></span>
<span id="cb26-17"><a href="reproducible-research-1.html#cb26-17" aria-hidden="true" tabindex="-1"></a>  DE <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-18"><a href="reproducible-research-1.html#cb26-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> DE_code,</span>
<span id="cb26-19"><a href="reproducible-research-1.html#cb26-19" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-20"><a href="reproducible-research-1.html#cb26-20" aria-hidden="true" tabindex="-1"></a>  IT <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-21"><a href="reproducible-research-1.html#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> IT_code,</span>
<span id="cb26-22"><a href="reproducible-research-1.html#cb26-22" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-23"><a href="reproducible-research-1.html#cb26-23" aria-hidden="true" tabindex="-1"></a>  SK <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-24"><a href="reproducible-research-1.html#cb26-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> SK_code,</span>
<span id="cb26-25"><a href="reproducible-research-1.html#cb26-25" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-26"><a href="reproducible-research-1.html#cb26-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-27"><a href="reproducible-research-1.html#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Decompose</span></span>
<span id="cb26-28"><a href="reproducible-research-1.html#cb26-28" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-29"><a href="reproducible-research-1.html#cb26-29" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">kitagawa_cfr</span>(DE<span class="sc">$</span>Cases, DE<span class="sc">$</span>ascfr,Cases,ascfr),</span>
<span id="cb26-30"><a href="reproducible-research-1.html#cb26-30" aria-hidden="true" tabindex="-1"></a>                              by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex, Region)]</span>
<span id="cb26-31"><a href="reproducible-research-1.html#cb26-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-32"><a href="reproducible-research-1.html#cb26-32" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-33"><a href="reproducible-research-1.html#cb26-33" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">kitagawa_cfr</span>(IT<span class="sc">$</span>Cases, IT<span class="sc">$</span>ascfr,Cases,ascfr),</span>
<span id="cb26-34"><a href="reproducible-research-1.html#cb26-34" aria-hidden="true" tabindex="-1"></a>                              by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex,Region)]</span>
<span id="cb26-35"><a href="reproducible-research-1.html#cb26-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-36"><a href="reproducible-research-1.html#cb26-36" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-37"><a href="reproducible-research-1.html#cb26-37" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">kitagawa_cfr</span>(SK<span class="sc">$</span>Cases, SK<span class="sc">$</span>ascfr,Cases,ascfr),</span>
<span id="cb26-38"><a href="reproducible-research-1.html#cb26-38" aria-hidden="true" tabindex="-1"></a>                              by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex,Region)]</span>
<span id="cb26-39"><a href="reproducible-research-1.html#cb26-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-40"><a href="reproducible-research-1.html#cb26-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only most recent date, both genders combined</span></span>
<span id="cb26-41"><a href="reproducible-research-1.html#cb26-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-42"><a href="reproducible-research-1.html#cb26-42" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date<span class="sc">&lt;=</span>refdate) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">which.max</span>(Date))</span>
<span id="cb26-43"><a href="reproducible-research-1.html#cb26-43" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date<span class="sc">&lt;=</span>refdate) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">which.max</span>(Date))</span>
<span id="cb26-44"><a href="reproducible-research-1.html#cb26-44" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Region) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date<span class="sc">&lt;=</span>refdate) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="fu">which.max</span>(Date))</span>
<span id="cb26-45"><a href="reproducible-research-1.html#cb26-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-46"><a href="reproducible-research-1.html#cb26-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop unnecessary variables</span></span>
<span id="cb26-47"><a href="reproducible-research-1.html#cb26-47" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Region,Date,CFR2,Diff,AgeComp,RateComp)</span>
<span id="cb26-48"><a href="reproducible-research-1.html#cb26-48" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Region,Date,CFR2,Diff,AgeComp,RateComp)</span>
<span id="cb26-49"><a href="reproducible-research-1.html#cb26-49" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Region,Date,CFR2,Diff,AgeComp,RateComp)</span>
<span id="cb26-50"><a href="reproducible-research-1.html#cb26-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-51"><a href="reproducible-research-1.html#cb26-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate relative contributions</span></span>
<span id="cb26-52"><a href="reproducible-research-1.html#cb26-52" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-53"><a href="reproducible-research-1.html#cb26-53" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-54"><a href="reproducible-research-1.html#cb26-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-55"><a href="reproducible-research-1.html#cb26-55" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeIT =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-56"><a href="reproducible-research-1.html#cb26-56" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateIT =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-57"><a href="reproducible-research-1.html#cb26-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-58"><a href="reproducible-research-1.html#cb26-58" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeSK =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-59"><a href="reproducible-research-1.html#cb26-59" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateSK =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-60"><a href="reproducible-research-1.html#cb26-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-61"><a href="reproducible-research-1.html#cb26-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb26-62"><a href="reproducible-research-1.html#cb26-62" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffDE=</span>Diff,<span class="at">AgeCompDE=</span>AgeComp,<span class="at">RateCompDE=</span>RateComp)</span>
<span id="cb26-63"><a href="reproducible-research-1.html#cb26-63" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffIT=</span>Diff,<span class="at">AgeCompIT=</span>AgeComp,<span class="at">RateCompIT=</span>RateComp)</span>
<span id="cb26-64"><a href="reproducible-research-1.html#cb26-64" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffSK=</span>Diff,<span class="at">AgeCompSK=</span>AgeComp,<span class="at">RateCompSK=</span>RateComp)</span>
<span id="cb26-65"><a href="reproducible-research-1.html#cb26-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-66"><a href="reproducible-research-1.html#cb26-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb26-67"><a href="reproducible-research-1.html#cb26-67" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(CFR2) <span class="co"># Appendix</span></span>
<span id="cb26-68"><a href="reproducible-research-1.html#cb26-68" aria-hidden="true" tabindex="-1"></a>  DecIT <span class="ot">&lt;-</span> DecIT <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(CFR2) <span class="co"># Appendix</span></span>
<span id="cb26-69"><a href="reproducible-research-1.html#cb26-69" aria-hidden="true" tabindex="-1"></a>  DecSK <span class="ot">&lt;-</span> DecSK <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(CFR2) <span class="co"># Table 2</span></span>
<span id="cb26-70"><a href="reproducible-research-1.html#cb26-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-71"><a href="reproducible-research-1.html#cb26-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-72"><a href="reproducible-research-1.html#cb26-72" aria-hidden="true" tabindex="-1"></a><span class="do">### Table 3: Italy trend ######################################################</span></span>
<span id="cb26-73"><a href="reproducible-research-1.html#cb26-73" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-74"><a href="reproducible-research-1.html#cb26-74" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Italy trend</span></span>
<span id="cb26-75"><a href="reproducible-research-1.html#cb26-75" aria-hidden="true" tabindex="-1"></a>  ITtrend <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-76"><a href="reproducible-research-1.html#cb26-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">&quot;ITbol09.03.2020&quot;</span>,</span>
<span id="cb26-77"><a href="reproducible-research-1.html#cb26-77" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-78"><a href="reproducible-research-1.html#cb26-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-79"><a href="reproducible-research-1.html#cb26-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate decomposition</span></span>
<span id="cb26-80"><a href="reproducible-research-1.html#cb26-80" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-81"><a href="reproducible-research-1.html#cb26-81" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">kitagawa_cfr</span>(Cases,ascfr,ITtrend<span class="sc">$</span>Cases, ITtrend<span class="sc">$</span>ascfr),</span>
<span id="cb26-82"><a href="reproducible-research-1.html#cb26-82" aria-hidden="true" tabindex="-1"></a>                                   by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex)]</span>
<span id="cb26-83"><a href="reproducible-research-1.html#cb26-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-84"><a href="reproducible-research-1.html#cb26-84" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only Italy</span></span>
<span id="cb26-85"><a href="reproducible-research-1.html#cb26-85" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">&quot;Italy&quot;</span> <span class="sc">&amp;</span> Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) </span>
<span id="cb26-86"><a href="reproducible-research-1.html#cb26-86" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-87"><a href="reproducible-research-1.html#cb26-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only keep interesting variables</span></span>
<span id="cb26-88"><a href="reproducible-research-1.html#cb26-88" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Code,Date,CFR1,Diff,AgeComp,RateComp)</span>
<span id="cb26-89"><a href="reproducible-research-1.html#cb26-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-90"><a href="reproducible-research-1.html#cb26-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Relative contributions</span></span>
<span id="cb26-91"><a href="reproducible-research-1.html#cb26-91" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-92"><a href="reproducible-research-1.html#cb26-92" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-93"><a href="reproducible-research-1.html#cb26-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-94"><a href="reproducible-research-1.html#cb26-94" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb26-95"><a href="reproducible-research-1.html#cb26-95" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffITt=</span>Diff,<span class="at">AgeCompITt=</span>AgeComp,<span class="at">RateCompITt=</span>RateComp)</span>
<span id="cb26-96"><a href="reproducible-research-1.html#cb26-96" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-97"><a href="reproducible-research-1.html#cb26-97" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb26-98"><a href="reproducible-research-1.html#cb26-98" aria-hidden="true" tabindex="-1"></a>  DecITtrend <span class="ot">&lt;-</span> DecITtrend <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb26-99"><a href="reproducible-research-1.html#cb26-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-100"><a href="reproducible-research-1.html#cb26-100" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-101"><a href="reproducible-research-1.html#cb26-101" aria-hidden="true" tabindex="-1"></a><span class="do">### Appendix: Trends USA/Spain ################################################</span></span>
<span id="cb26-102"><a href="reproducible-research-1.html#cb26-102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-103"><a href="reproducible-research-1.html#cb26-103" aria-hidden="true" tabindex="-1"></a>  <span class="do">### NYC trend</span></span>
<span id="cb26-104"><a href="reproducible-research-1.html#cb26-104" aria-hidden="true" tabindex="-1"></a>  NYtrend <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-105"><a href="reproducible-research-1.html#cb26-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">&quot;US_NYC22.03.2020&quot;</span>,</span>
<span id="cb26-106"><a href="reproducible-research-1.html#cb26-106" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-107"><a href="reproducible-research-1.html#cb26-107" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-108"><a href="reproducible-research-1.html#cb26-108" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate decomposition</span></span>
<span id="cb26-109"><a href="reproducible-research-1.html#cb26-109" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-110"><a href="reproducible-research-1.html#cb26-110" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">kitagawa_cfr</span>(Cases,ascfr,NYtrend<span class="sc">$</span>Cases, NYtrend<span class="sc">$</span>ascfr),</span>
<span id="cb26-111"><a href="reproducible-research-1.html#cb26-111" aria-hidden="true" tabindex="-1"></a>                                   by<span class="ot">=</span><span class="fu">list</span>(Country, Region,Code, Date, Sex)]</span>
<span id="cb26-112"><a href="reproducible-research-1.html#cb26-112" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-113"><a href="reproducible-research-1.html#cb26-113" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only NYC</span></span>
<span id="cb26-114"><a href="reproducible-research-1.html#cb26-114" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">&quot;USA&quot;</span> <span class="sc">&amp;</span> Region<span class="sc">==</span><span class="st">&quot;NYC&quot;</span> <span class="sc">&amp;</span> Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) </span>
<span id="cb26-115"><a href="reproducible-research-1.html#cb26-115" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-116"><a href="reproducible-research-1.html#cb26-116" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only keep interesting variables</span></span>
<span id="cb26-117"><a href="reproducible-research-1.html#cb26-117" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Code,Date,CFR1,Diff,AgeComp,RateComp)</span>
<span id="cb26-118"><a href="reproducible-research-1.html#cb26-118" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-119"><a href="reproducible-research-1.html#cb26-119" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Relative contributions</span></span>
<span id="cb26-120"><a href="reproducible-research-1.html#cb26-120" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-121"><a href="reproducible-research-1.html#cb26-121" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-122"><a href="reproducible-research-1.html#cb26-122" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-123"><a href="reproducible-research-1.html#cb26-123" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb26-124"><a href="reproducible-research-1.html#cb26-124" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffITt=</span>Diff,<span class="at">AgeCompITt=</span>AgeComp,<span class="at">RateCompITt=</span>RateComp)</span>
<span id="cb26-125"><a href="reproducible-research-1.html#cb26-125" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-126"><a href="reproducible-research-1.html#cb26-126" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb26-127"><a href="reproducible-research-1.html#cb26-127" aria-hidden="true" tabindex="-1"></a>  DecNYtrend <span class="ot">&lt;-</span> DecNYtrend <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb26-128"><a href="reproducible-research-1.html#cb26-128" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-129"><a href="reproducible-research-1.html#cb26-129" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Spain trend</span></span>
<span id="cb26-130"><a href="reproducible-research-1.html#cb26-130" aria-hidden="true" tabindex="-1"></a>  EStrend <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-131"><a href="reproducible-research-1.html#cb26-131" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">&quot;ES21.03.2020&quot;</span>,</span>
<span id="cb26-132"><a href="reproducible-research-1.html#cb26-132" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-133"><a href="reproducible-research-1.html#cb26-133" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-134"><a href="reproducible-research-1.html#cb26-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate decomposition</span></span>
<span id="cb26-135"><a href="reproducible-research-1.html#cb26-135" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-136"><a href="reproducible-research-1.html#cb26-136" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">kitagawa_cfr</span>(Cases,ascfr,EStrend<span class="sc">$</span>Cases, EStrend<span class="sc">$</span>ascfr),</span>
<span id="cb26-137"><a href="reproducible-research-1.html#cb26-137" aria-hidden="true" tabindex="-1"></a>                                   by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex)]</span>
<span id="cb26-138"><a href="reproducible-research-1.html#cb26-138" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-139"><a href="reproducible-research-1.html#cb26-139" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only Spain</span></span>
<span id="cb26-140"><a href="reproducible-research-1.html#cb26-140" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">&quot;Spain&quot;</span> <span class="sc">&amp;</span> Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) </span>
<span id="cb26-141"><a href="reproducible-research-1.html#cb26-141" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-142"><a href="reproducible-research-1.html#cb26-142" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only keep interesting variables</span></span>
<span id="cb26-143"><a href="reproducible-research-1.html#cb26-143" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Code,Date,CFR1,Diff,AgeComp,RateComp)</span>
<span id="cb26-144"><a href="reproducible-research-1.html#cb26-144" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-145"><a href="reproducible-research-1.html#cb26-145" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Relative contributions</span></span>
<span id="cb26-146"><a href="reproducible-research-1.html#cb26-146" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-147"><a href="reproducible-research-1.html#cb26-147" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-148"><a href="reproducible-research-1.html#cb26-148" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-149"><a href="reproducible-research-1.html#cb26-149" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb26-150"><a href="reproducible-research-1.html#cb26-150" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffITt=</span>Diff,<span class="at">AgeCompITt=</span>AgeComp,<span class="at">RateCompITt=</span>RateComp)</span>
<span id="cb26-151"><a href="reproducible-research-1.html#cb26-151" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-152"><a href="reproducible-research-1.html#cb26-152" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb26-153"><a href="reproducible-research-1.html#cb26-153" aria-hidden="true" tabindex="-1"></a>  DecEStrend <span class="ot">&lt;-</span> DecEStrend <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb26-154"><a href="reproducible-research-1.html#cb26-154" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-155"><a href="reproducible-research-1.html#cb26-155" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Germany trend</span></span>
<span id="cb26-156"><a href="reproducible-research-1.html#cb26-156" aria-hidden="true" tabindex="-1"></a>  DEtrend <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb26-157"><a href="reproducible-research-1.html#cb26-157" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">&quot;DE_21.03.2020&quot;</span>,</span>
<span id="cb26-158"><a href="reproducible-research-1.html#cb26-158" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb26-159"><a href="reproducible-research-1.html#cb26-159" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-160"><a href="reproducible-research-1.html#cb26-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate decomposition</span></span>
<span id="cb26-161"><a href="reproducible-research-1.html#cb26-161" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb26-162"><a href="reproducible-research-1.html#cb26-162" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">kitagawa_cfr</span>(Cases,ascfr,DEtrend<span class="sc">$</span>Cases, DEtrend<span class="sc">$</span>ascfr),</span>
<span id="cb26-163"><a href="reproducible-research-1.html#cb26-163" aria-hidden="true" tabindex="-1"></a>                                   by<span class="ot">=</span><span class="fu">list</span>(Country, Code, Date, Sex)]</span>
<span id="cb26-164"><a href="reproducible-research-1.html#cb26-164" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-165"><a href="reproducible-research-1.html#cb26-165" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only Germany</span></span>
<span id="cb26-166"><a href="reproducible-research-1.html#cb26-166" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country<span class="sc">==</span><span class="st">&quot;Germany&quot;</span> <span class="sc">&amp;</span> Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span> <span class="sc">&amp;</span> Date<span class="sc">&gt;=</span><span class="st">&quot;2020-03-21&quot;</span>) </span>
<span id="cb26-167"><a href="reproducible-research-1.html#cb26-167" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-168"><a href="reproducible-research-1.html#cb26-168" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only keep interesting variables</span></span>
<span id="cb26-169"><a href="reproducible-research-1.html#cb26-169" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Code,Date,CFR1,Diff,AgeComp,RateComp)</span>
<span id="cb26-170"><a href="reproducible-research-1.html#cb26-170" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-171"><a href="reproducible-research-1.html#cb26-171" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Relative contributions</span></span>
<span id="cb26-172"><a href="reproducible-research-1.html#cb26-172" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-173"><a href="reproducible-research-1.html#cb26-173" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb26-174"><a href="reproducible-research-1.html#cb26-174" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-175"><a href="reproducible-research-1.html#cb26-175" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb26-176"><a href="reproducible-research-1.html#cb26-176" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffITt=</span>Diff,<span class="at">AgeCompITt=</span>AgeComp,<span class="at">RateCompITt=</span>RateComp)</span>
<span id="cb26-177"><a href="reproducible-research-1.html#cb26-177" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-178"><a href="reproducible-research-1.html#cb26-178" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb26-179"><a href="reproducible-research-1.html#cb26-179" aria-hidden="true" tabindex="-1"></a>  DecDEtrend <span class="ot">&lt;-</span> DecDEtrend <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb26-180"><a href="reproducible-research-1.html#cb26-180" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-181"><a href="reproducible-research-1.html#cb26-181" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-182"><a href="reproducible-research-1.html#cb26-182" aria-hidden="true" tabindex="-1"></a><span class="do">### Save results ##############################################################</span></span>
<span id="cb26-183"><a href="reproducible-research-1.html#cb26-183" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-184"><a href="reproducible-research-1.html#cb26-184" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Table 2</span></span>
<span id="cb26-185"><a href="reproducible-research-1.html#cb26-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecSK,</span>
<span id="cb26-186"><a href="reproducible-research-1.html#cb26-186" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/Table2.xlsx&quot;</span>)</span>
<span id="cb26-187"><a href="reproducible-research-1.html#cb26-187" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-188"><a href="reproducible-research-1.html#cb26-188" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Table 3</span></span>
<span id="cb26-189"><a href="reproducible-research-1.html#cb26-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecITtrend,</span>
<span id="cb26-190"><a href="reproducible-research-1.html#cb26-190" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/Table3.xlsx&quot;</span>)</span>
<span id="cb26-191"><a href="reproducible-research-1.html#cb26-191" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-192"><a href="reproducible-research-1.html#cb26-192" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 1</span></span>
<span id="cb26-193"><a href="reproducible-research-1.html#cb26-193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecDE,</span>
<span id="cb26-194"><a href="reproducible-research-1.html#cb26-194" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab1.xlsx&quot;</span>)</span>
<span id="cb26-195"><a href="reproducible-research-1.html#cb26-195" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-196"><a href="reproducible-research-1.html#cb26-196" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 2</span></span>
<span id="cb26-197"><a href="reproducible-research-1.html#cb26-197" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecIT,</span>
<span id="cb26-198"><a href="reproducible-research-1.html#cb26-198" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab2.xlsx&quot;</span>)</span>
<span id="cb26-199"><a href="reproducible-research-1.html#cb26-199" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-200"><a href="reproducible-research-1.html#cb26-200" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 3</span></span>
<span id="cb26-201"><a href="reproducible-research-1.html#cb26-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecNYtrend,</span>
<span id="cb26-202"><a href="reproducible-research-1.html#cb26-202" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab3.xlsx&quot;</span>)</span>
<span id="cb26-203"><a href="reproducible-research-1.html#cb26-203" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-204"><a href="reproducible-research-1.html#cb26-204" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 4</span></span>
<span id="cb26-205"><a href="reproducible-research-1.html#cb26-205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecEStrend,</span>
<span id="cb26-206"><a href="reproducible-research-1.html#cb26-206" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab4.xlsx&quot;</span>)</span>
<span id="cb26-207"><a href="reproducible-research-1.html#cb26-207" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb26-208"><a href="reproducible-research-1.html#cb26-208" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 5</span></span>
<span id="cb26-209"><a href="reproducible-research-1.html#cb26-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecDEtrend,</span>
<span id="cb26-210"><a href="reproducible-research-1.html#cb26-210" aria-hidden="true" tabindex="-1"></a>             <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab5.xlsx&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="reproducible-research-1.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Load functions &amp; packages #################################################</span></span>
<span id="cb27-2"><a href="reproducible-research-1.html#cb27-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb27-3"><a href="reproducible-research-1.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Not necessary anymore, all the libraries are stored together above. </span></span>
<span id="cb27-4"><a href="reproducible-research-1.html#cb27-4" aria-hidden="true" tabindex="-1"></a> <span class="do">## source((&quot;00_functions.R&quot;))</span></span>
<span id="cb27-5"><a href="reproducible-research-1.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-6"><a href="reproducible-research-1.html#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="reproducible-research-1.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="do">### Load case data ############################################################</span></span>
<span id="cb27-8"><a href="reproducible-research-1.html#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="reproducible-research-1.html#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load data</span></span>
<span id="cb27-10"><a href="reproducible-research-1.html#cb27-10" aria-hidden="true" tabindex="-1"></a>  cases <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/COVID_article/inputdata.csv&quot;</span>)</span>
<span id="cb27-11"><a href="reproducible-research-1.html#cb27-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-12"><a href="reproducible-research-1.html#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Edit date</span></span>
<span id="cb27-13"><a href="reproducible-research-1.html#cb27-13" aria-hidden="true" tabindex="-1"></a>  cases<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(cases<span class="sc">$</span>Date,<span class="st">&quot;%d.%m.%y&quot;</span>)</span>
<span id="cb27-14"><a href="reproducible-research-1.html#cb27-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-15"><a href="reproducible-research-1.html#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Lists of countries and regions</span></span>
<span id="cb27-16"><a href="reproducible-research-1.html#cb27-16" aria-hidden="true" tabindex="-1"></a>  countrylist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;China&quot;</span>,<span class="st">&quot;Germany&quot;</span>,<span class="st">&quot;Italy&quot;</span>,<span class="st">&quot;South Korea&quot;</span>,<span class="st">&quot;Spain&quot;</span>,<span class="st">&quot;USA&quot;</span>)</span>
<span id="cb27-17"><a href="reproducible-research-1.html#cb27-17" aria-hidden="true" tabindex="-1"></a>  regionlist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;All&quot;</span>)</span>
<span id="cb27-18"><a href="reproducible-research-1.html#cb27-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-19"><a href="reproducible-research-1.html#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Restrict</span></span>
<span id="cb27-20"><a href="reproducible-research-1.html#cb27-20" aria-hidden="true" tabindex="-1"></a>  cases <span class="ot">&lt;-</span> cases <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country <span class="sc">%in%</span> countrylist <span class="sc">&amp;</span> Region <span class="sc">%in%</span> regionlist)</span>
<span id="cb27-21"><a href="reproducible-research-1.html#cb27-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-22"><a href="reproducible-research-1.html#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop tests</span></span>
<span id="cb27-23"><a href="reproducible-research-1.html#cb27-23" aria-hidden="true" tabindex="-1"></a>  cases <span class="ot">&lt;-</span> cases <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Tests=</span><span class="cn">NULL</span>)</span>
<span id="cb27-24"><a href="reproducible-research-1.html#cb27-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-25"><a href="reproducible-research-1.html#cb27-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-26"><a href="reproducible-research-1.html#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="do">### Load and edit excess mortality data #######################################</span></span>
<span id="cb27-27"><a href="reproducible-research-1.html#cb27-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-28"><a href="reproducible-research-1.html#cb27-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load CSV file</span></span>
<span id="cb27-29"><a href="reproducible-research-1.html#cb27-29" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/COVID_article/baseline_excess_pclm_5.csv&quot;</span>)</span>
<span id="cb27-30"><a href="reproducible-research-1.html#cb27-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-31"><a href="reproducible-research-1.html#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set Date as date</span></span>
<span id="cb27-32"><a href="reproducible-research-1.html#cb27-32" aria-hidden="true" tabindex="-1"></a>  dat<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(dat<span class="sc">$</span>date,<span class="st">&quot;%d.%m.%y&quot;</span>)</span>
<span id="cb27-33"><a href="reproducible-research-1.html#cb27-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-34"><a href="reproducible-research-1.html#cb27-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Restrict</span></span>
<span id="cb27-35"><a href="reproducible-research-1.html#cb27-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Restrict</span></span>
<span id="cb27-36"><a href="reproducible-research-1.html#cb27-36" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country <span class="sc">%in%</span> countrylist) <span class="sc">%&gt;%</span> </span>
<span id="cb27-37"><a href="reproducible-research-1.html#cb27-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Date <span class="sc">&gt;=</span> <span class="st">&quot;2020-02-24&quot;</span>)</span>
<span id="cb27-38"><a href="reproducible-research-1.html#cb27-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-39"><a href="reproducible-research-1.html#cb27-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-40"><a href="reproducible-research-1.html#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="do">### Analysis similar to Table 2 ###############################################</span></span>
<span id="cb27-41"><a href="reproducible-research-1.html#cb27-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-42"><a href="reproducible-research-1.html#cb27-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate cumulative excess deaths</span></span>
<span id="cb27-43"><a href="reproducible-research-1.html#cb27-43" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb27-44"><a href="reproducible-research-1.html#cb27-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">exc_p =</span> <span class="fu">ifelse</span>(excess <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="dv">0</span>, excess)) <span class="sc">%&gt;%</span></span>
<span id="cb27-45"><a href="reproducible-research-1.html#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country,Age,Sex) <span class="sc">%&gt;%</span> </span>
<span id="cb27-46"><a href="reproducible-research-1.html#cb27-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Exc =</span> <span class="fu">cumsum</span>(exc_p)) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb27-47"><a href="reproducible-research-1.html#cb27-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-48"><a href="reproducible-research-1.html#cb27-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Edit age variable</span></span>
<span id="cb27-49"><a href="reproducible-research-1.html#cb27-49" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Age=</span><span class="fu">recode</span>(Age,</span>
<span id="cb27-50"><a href="reproducible-research-1.html#cb27-50" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">0</span>,</span>
<span id="cb27-51"><a href="reproducible-research-1.html#cb27-51" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;15&#39;</span><span class="ot">=</span><span class="dv">10</span>,</span>
<span id="cb27-52"><a href="reproducible-research-1.html#cb27-52" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;25&#39;</span><span class="ot">=</span><span class="dv">20</span>,</span>
<span id="cb27-53"><a href="reproducible-research-1.html#cb27-53" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;35&#39;</span><span class="ot">=</span><span class="dv">30</span>,</span>
<span id="cb27-54"><a href="reproducible-research-1.html#cb27-54" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;45&#39;</span><span class="ot">=</span><span class="dv">40</span>,</span>
<span id="cb27-55"><a href="reproducible-research-1.html#cb27-55" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;55&#39;</span><span class="ot">=</span><span class="dv">50</span>,</span>
<span id="cb27-56"><a href="reproducible-research-1.html#cb27-56" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;65&#39;</span><span class="ot">=</span><span class="dv">60</span>,</span>
<span id="cb27-57"><a href="reproducible-research-1.html#cb27-57" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;75&#39;</span><span class="ot">=</span><span class="dv">70</span>,</span>
<span id="cb27-58"><a href="reproducible-research-1.html#cb27-58" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;85&#39;</span><span class="ot">=</span><span class="dv">80</span>,</span>
<span id="cb27-59"><a href="reproducible-research-1.html#cb27-59" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&#39;95&#39;</span><span class="ot">=</span><span class="dv">90</span>))</span>
<span id="cb27-60"><a href="reproducible-research-1.html#cb27-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-61"><a href="reproducible-research-1.html#cb27-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Aggregate</span></span>
<span id="cb27-62"><a href="reproducible-research-1.html#cb27-62" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country,Sex,Date,Age,Week) <span class="sc">%&gt;%</span> </span>
<span id="cb27-63"><a href="reproducible-research-1.html#cb27-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Exc) <span class="sc">%&gt;%</span> <span class="fu">summarize_all</span>(sum)</span>
<span id="cb27-64"><a href="reproducible-research-1.html#cb27-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-65"><a href="reproducible-research-1.html#cb27-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adjust date for US: case countrs from two days earlier than excess mortality</span></span>
<span id="cb27-66"><a href="reproducible-research-1.html#cb27-66" aria-hidden="true" tabindex="-1"></a>  cases<span class="sc">$</span>Date[cases<span class="sc">$</span>Date<span class="sc">==</span><span class="st">&quot;2020-05-23&quot;</span> <span class="sc">&amp;</span> cases<span class="sc">$</span>Country<span class="sc">==</span><span class="st">&quot;USA&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;2020-05-25&quot;</span></span>
<span id="cb27-67"><a href="reproducible-research-1.html#cb27-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-68"><a href="reproducible-research-1.html#cb27-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Merge with cases</span></span>
<span id="cb27-69"><a href="reproducible-research-1.html#cb27-69" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(dat,cases[,<span class="fu">c</span>(<span class="st">&quot;Country&quot;</span>,<span class="st">&quot;Date&quot;</span>,<span class="st">&quot;Age&quot;</span>,<span class="st">&quot;Sex&quot;</span>,<span class="st">&quot;Cases&quot;</span>)])</span>
<span id="cb27-70"><a href="reproducible-research-1.html#cb27-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-71"><a href="reproducible-research-1.html#cb27-71" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate ASFRs</span></span>
<span id="cb27-72"><a href="reproducible-research-1.html#cb27-72" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">ascfr =</span> Exc <span class="sc">/</span> Cases,</span>
<span id="cb27-73"><a href="reproducible-research-1.html#cb27-73" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ascfr =</span> <span class="fu">replace_na</span>(ascfr, <span class="dv">0</span>),</span>
<span id="cb27-74"><a href="reproducible-research-1.html#cb27-74" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ascfr =</span> <span class="fu">ifelse</span>(<span class="fu">is.infinite</span>(ascfr),<span class="dv">0</span>,ascfr),</span>
<span id="cb27-75"><a href="reproducible-research-1.html#cb27-75" aria-hidden="true" tabindex="-1"></a>                        <span class="at">ascfr =</span> <span class="fu">ifelse</span>(ascfr<span class="sc">&gt;</span><span class="dv">1</span>,<span class="dv">1</span>,ascfr))</span>
<span id="cb27-76"><a href="reproducible-research-1.html#cb27-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-77"><a href="reproducible-research-1.html#cb27-77" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Decide some reference patterns (here Germany)</span></span>
<span id="cb27-78"><a href="reproducible-research-1.html#cb27-78" aria-hidden="true" tabindex="-1"></a>  DE <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb27-79"><a href="reproducible-research-1.html#cb27-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&quot;Germany&quot;</span>,</span>
<span id="cb27-80"><a href="reproducible-research-1.html#cb27-80" aria-hidden="true" tabindex="-1"></a>           Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>,</span>
<span id="cb27-81"><a href="reproducible-research-1.html#cb27-81" aria-hidden="true" tabindex="-1"></a>           <span class="co">#Date == maxdate)</span></span>
<span id="cb27-82"><a href="reproducible-research-1.html#cb27-82" aria-hidden="true" tabindex="-1"></a>           Week <span class="sc">==</span> <span class="dv">19</span>)</span>
<span id="cb27-83"><a href="reproducible-research-1.html#cb27-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-84"><a href="reproducible-research-1.html#cb27-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-85"><a href="reproducible-research-1.html#cb27-85" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Decompose</span></span>
<span id="cb27-86"><a href="reproducible-research-1.html#cb27-86" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(dat)[,</span>
<span id="cb27-87"><a href="reproducible-research-1.html#cb27-87" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">kitagawa_cfr</span>(DE<span class="sc">$</span>Cases, DE<span class="sc">$</span>ascfr,Cases,ascfr),</span>
<span id="cb27-88"><a href="reproducible-research-1.html#cb27-88" aria-hidden="true" tabindex="-1"></a>                              by<span class="ot">=</span><span class="fu">list</span>(Country,Week, Sex)]</span>
<span id="cb27-89"><a href="reproducible-research-1.html#cb27-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-90"><a href="reproducible-research-1.html#cb27-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only most recent date, both genders combined</span></span>
<span id="cb27-91"><a href="reproducible-research-1.html#cb27-91" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex<span class="sc">==</span><span class="st">&quot;b&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Week <span class="sc">%in%</span> <span class="dv">19</span><span class="sc">:</span><span class="dv">22</span>)</span>
<span id="cb27-92"><a href="reproducible-research-1.html#cb27-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-93"><a href="reproducible-research-1.html#cb27-93" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop unnecessary variables</span></span>
<span id="cb27-94"><a href="reproducible-research-1.html#cb27-94" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country,Week,CFR2,Diff,AgeComp,RateComp)</span>
<span id="cb27-95"><a href="reproducible-research-1.html#cb27-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-96"><a href="reproducible-research-1.html#cb27-96" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate relative contributions</span></span>
<span id="cb27-97"><a href="reproducible-research-1.html#cb27-97" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relAgeDE =</span> <span class="fu">abs</span>(AgeComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb27-98"><a href="reproducible-research-1.html#cb27-98" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">relRateDE =</span> <span class="fu">abs</span>(RateComp)<span class="sc">/</span>(<span class="fu">abs</span>(AgeComp)<span class="sc">+</span><span class="fu">abs</span>(RateComp)))</span>
<span id="cb27-99"><a href="reproducible-research-1.html#cb27-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-100"><a href="reproducible-research-1.html#cb27-100" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename</span></span>
<span id="cb27-101"><a href="reproducible-research-1.html#cb27-101" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">DiffDE=</span>Diff,<span class="at">AgeCompDE=</span>AgeComp,<span class="at">RateCompDE=</span>RateComp)</span>
<span id="cb27-102"><a href="reproducible-research-1.html#cb27-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-103"><a href="reproducible-research-1.html#cb27-103" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort data</span></span>
<span id="cb27-104"><a href="reproducible-research-1.html#cb27-104" aria-hidden="true" tabindex="-1"></a>  DecDE <span class="ot">&lt;-</span> DecDE <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(CFR2) <span class="co"># Appendix</span></span>
<span id="cb27-105"><a href="reproducible-research-1.html#cb27-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-106"><a href="reproducible-research-1.html#cb27-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-107"><a href="reproducible-research-1.html#cb27-107" aria-hidden="true" tabindex="-1"></a><span class="do">### Save extra table ##########################################################</span></span>
<span id="cb27-108"><a href="reproducible-research-1.html#cb27-108" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-109"><a href="reproducible-research-1.html#cb27-109" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Appendix table 1</span></span>
<span id="cb27-110"><a href="reproducible-research-1.html#cb27-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_xlsx</span>(<span class="at">x=</span>DecDE,</span>
<span id="cb27-111"><a href="reproducible-research-1.html#cb27-111" aria-hidden="true" tabindex="-1"></a>            <span class="at">path=</span><span class="st">&quot;files/COVID_article/AppendixTab6.xlsx&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="reproducible-research-1.html#cb28-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Load data</span></span>
<span id="cb28-2"><a href="reproducible-research-1.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  db_gh <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;files/COVID_article/inputdata.csv&quot;</span>)</span>
<span id="cb28-3"><a href="reproducible-research-1.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="reproducible-research-1.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="reproducible-research-1.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="do">### Aggregate data ############################################################</span></span>
<span id="cb28-6"><a href="reproducible-research-1.html#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="reproducible-research-1.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter date</span></span>
<span id="cb28-8"><a href="reproducible-research-1.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  db_gh<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(db_gh<span class="sc">$</span>Date,<span class="st">&quot;%d.%m.%y&quot;</span>)</span>
<span id="cb28-9"><a href="reproducible-research-1.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  db_gh2 <span class="ot">&lt;-</span> db_gh <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date<span class="sc">&lt;=</span><span class="fu">as.Date</span>(<span class="st">&quot;30.06.2020&quot;</span>,<span class="st">&quot;%d.%m.%y&quot;</span>))</span>
<span id="cb28-10"><a href="reproducible-research-1.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-11"><a href="reproducible-research-1.html#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set New York as &quot;country&quot; (easier handling)</span></span>
<span id="cb28-12"><a href="reproducible-research-1.html#cb28-12" aria-hidden="true" tabindex="-1"></a>  db_gh2<span class="sc">$</span>Country[db_gh2<span class="sc">$</span>Country<span class="sc">==</span><span class="st">&quot;USA&quot;</span> <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Region <span class="sc">==</span> <span class="st">&quot;NYC&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;NYC&quot;</span></span>
<span id="cb28-13"><a href="reproducible-research-1.html#cb28-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-14"><a href="reproducible-research-1.html#cb28-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum data over age groups</span></span>
<span id="cb28-15"><a href="reproducible-research-1.html#cb28-15" aria-hidden="true" tabindex="-1"></a>  db_gh2 <span class="ot">&lt;-</span> db_gh2 <span class="sc">%&gt;%</span> </span>
<span id="cb28-16"><a href="reproducible-research-1.html#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span>Country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;China&quot;</span>,<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;South Korea&quot;</span>) <span class="sc">&amp;</span> Sex <span class="sc">==</span> <span class="st">&quot;b&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-17"><a href="reproducible-research-1.html#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country, Code,Date) <span class="sc">%&gt;%</span> </span>
<span id="cb28-18"><a href="reproducible-research-1.html#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">Cases =</span> <span class="fu">sum</span>(Cases),</span>
<span id="cb28-19"><a href="reproducible-research-1.html#cb28-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">Deaths =</span> <span class="fu">sum</span>(Deaths))</span>
<span id="cb28-20"><a href="reproducible-research-1.html#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="reproducible-research-1.html#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Exclude bolletino </span></span>
<span id="cb28-22"><a href="reproducible-research-1.html#cb28-22" aria-hidden="true" tabindex="-1"></a>  db_gh2 <span class="ot">&lt;-</span> db_gh2 <span class="sc">%&gt;%</span></span>
<span id="cb28-23"><a href="reproducible-research-1.html#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">str_sub</span>(Code, <span class="dv">1</span>, <span class="dv">5</span>) <span class="sc">!=</span> <span class="st">&quot;ITbol&quot;</span>)</span>
<span id="cb28-24"><a href="reproducible-research-1.html#cb28-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-25"><a href="reproducible-research-1.html#cb28-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort by date</span></span>
<span id="cb28-26"><a href="reproducible-research-1.html#cb28-26" aria-hidden="true" tabindex="-1"></a>  db_gh2 <span class="ot">&lt;-</span> db_gh2 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Date)</span>
<span id="cb28-27"><a href="reproducible-research-1.html#cb28-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-28"><a href="reproducible-research-1.html#cb28-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Smooth reporting issues cases</span></span>
<span id="cb28-29"><a href="reproducible-research-1.html#cb28-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(country <span class="cf">in</span> <span class="fu">unique</span>(db_gh2<span class="sc">$</span>Country)) {</span>
<span id="cb28-30"><a href="reproducible-research-1.html#cb28-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-31"><a href="reproducible-research-1.html#cb28-31" aria-hidden="true" tabindex="-1"></a>    days <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Date[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country]</span>
<span id="cb28-32"><a href="reproducible-research-1.html#cb28-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-33"><a href="reproducible-research-1.html#cb28-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(day <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(days)) {</span>
<span id="cb28-34"><a href="reproducible-research-1.html#cb28-34" aria-hidden="true" tabindex="-1"></a>      current <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Cases[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day]]</span>
<span id="cb28-35"><a href="reproducible-research-1.html#cb28-35" aria-hidden="true" tabindex="-1"></a>      previous <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Cases[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day<span class="dv">-1</span>]]</span>
<span id="cb28-36"><a href="reproducible-research-1.html#cb28-36" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-37"><a href="reproducible-research-1.html#cb28-37" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(current<span class="sc">&lt;</span>previous) db_gh2<span class="sc">$</span>Cases[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day]] <span class="ot">&lt;-</span> previous</span>
<span id="cb28-38"><a href="reproducible-research-1.html#cb28-38" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-39"><a href="reproducible-research-1.html#cb28-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-40"><a href="reproducible-research-1.html#cb28-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-41"><a href="reproducible-research-1.html#cb28-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-42"><a href="reproducible-research-1.html#cb28-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-43"><a href="reproducible-research-1.html#cb28-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Smooth reporting issues deaths</span></span>
<span id="cb28-44"><a href="reproducible-research-1.html#cb28-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(country <span class="cf">in</span> <span class="fu">unique</span>(db_gh2<span class="sc">$</span>Country)) {</span>
<span id="cb28-45"><a href="reproducible-research-1.html#cb28-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-46"><a href="reproducible-research-1.html#cb28-46" aria-hidden="true" tabindex="-1"></a>    days <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Date[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country]</span>
<span id="cb28-47"><a href="reproducible-research-1.html#cb28-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-48"><a href="reproducible-research-1.html#cb28-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(day <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(days)) {</span>
<span id="cb28-49"><a href="reproducible-research-1.html#cb28-49" aria-hidden="true" tabindex="-1"></a>      current <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Deaths[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day]]</span>
<span id="cb28-50"><a href="reproducible-research-1.html#cb28-50" aria-hidden="true" tabindex="-1"></a>      previous <span class="ot">&lt;-</span> db_gh2<span class="sc">$</span>Deaths[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day<span class="dv">-1</span>]]</span>
<span id="cb28-51"><a href="reproducible-research-1.html#cb28-51" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-52"><a href="reproducible-research-1.html#cb28-52" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(current<span class="sc">&lt;</span>previous) db_gh2<span class="sc">$</span>Deaths[db_gh2<span class="sc">$</span>Country<span class="sc">==</span>country <span class="sc">&amp;</span> db_gh2<span class="sc">$</span>Date<span class="sc">==</span>days[day]] <span class="ot">&lt;-</span> previous</span>
<span id="cb28-53"><a href="reproducible-research-1.html#cb28-53" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-54"><a href="reproducible-research-1.html#cb28-54" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-55"><a href="reproducible-research-1.html#cb28-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-56"><a href="reproducible-research-1.html#cb28-56" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb28-57"><a href="reproducible-research-1.html#cb28-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-58"><a href="reproducible-research-1.html#cb28-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-59"><a href="reproducible-research-1.html#cb28-59" aria-hidden="true" tabindex="-1"></a><span class="do">### Plot settings #############################################################</span></span>
<span id="cb28-60"><a href="reproducible-research-1.html#cb28-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-61"><a href="reproducible-research-1.html#cb28-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set colors</span></span>
<span id="cb28-62"><a href="reproducible-research-1.html#cb28-62" aria-hidden="true" tabindex="-1"></a>  col_country <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Germany&quot;</span> <span class="ot">=</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb28-63"><a href="reproducible-research-1.html#cb28-63" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;Italy&quot;</span> <span class="ot">=</span> <span class="st">&quot;#2ca25f&quot;</span>,</span>
<span id="cb28-64"><a href="reproducible-research-1.html#cb28-64" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;NYC&quot;</span><span class="ot">=</span><span class="st">&quot;#f0027f&quot;</span>,</span>
<span id="cb28-65"><a href="reproducible-research-1.html#cb28-65" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;Spain&quot;</span><span class="ot">=</span><span class="st">&quot;#beaed4&quot;</span>,</span>
<span id="cb28-66"><a href="reproducible-research-1.html#cb28-66" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;South Korea&quot;</span><span class="ot">=</span><span class="st">&quot;#fdc086&quot;</span>)<span class="co">#,</span></span>
<span id="cb28-67"><a href="reproducible-research-1.html#cb28-67" aria-hidden="true" tabindex="-1"></a>                   <span class="co">#&quot;USA&quot;=&quot;#386cb0&quot;)</span></span>
<span id="cb28-68"><a href="reproducible-research-1.html#cb28-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-69"><a href="reproducible-research-1.html#cb28-69" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>,</span>
<span id="cb28-70"><a href="reproducible-research-1.html#cb28-70" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;#2ca25f&quot;</span>,</span>
<span id="cb28-71"><a href="reproducible-research-1.html#cb28-71" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;#f0027f&quot;</span>,</span>
<span id="cb28-72"><a href="reproducible-research-1.html#cb28-72" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;#beaed4&quot;</span>,</span>
<span id="cb28-73"><a href="reproducible-research-1.html#cb28-73" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;#fdc086&quot;</span>)<span class="co">#,</span></span>
<span id="cb28-74"><a href="reproducible-research-1.html#cb28-74" aria-hidden="true" tabindex="-1"></a>            <span class="co">#&quot;#386cb0&quot;)</span></span>
<span id="cb28-75"><a href="reproducible-research-1.html#cb28-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-76"><a href="reproducible-research-1.html#cb28-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-77"><a href="reproducible-research-1.html#cb28-77" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Axis</span></span>
<span id="cb28-78"><a href="reproducible-research-1.html#cb28-78" aria-hidden="true" tabindex="-1"></a>  labs <span class="ot">&lt;-</span> db_gh2 <span class="sc">%&gt;%</span></span>
<span id="cb28-79"><a href="reproducible-research-1.html#cb28-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span> </span>
<span id="cb28-80"><a href="reproducible-research-1.html#cb28-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Cases <span class="sc">==</span> <span class="fu">max</span>(Cases)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-81"><a href="reproducible-research-1.html#cb28-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Cases =</span> Cases <span class="sc">+</span> <span class="dv">3000</span>)</span>
<span id="cb28-82"><a href="reproducible-research-1.html#cb28-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb28-83"><a href="reproducible-research-1.html#cb28-83" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Including all reports</span></span>
<span id="cb28-84"><a href="reproducible-research-1.html#cb28-84" aria-hidden="true" tabindex="-1"></a>  tx <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb28-85"><a href="reproducible-research-1.html#cb28-85" aria-hidden="true" tabindex="-1"></a>  lim_x <span class="ot">&lt;-</span> <span class="dv">240000</span></span>
<span id="cb28-86"><a href="reproducible-research-1.html#cb28-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-87"><a href="reproducible-research-1.html#cb28-87" aria-hidden="true" tabindex="-1"></a><span class="do">### Plot ######################################################################</span></span>
<span id="cb28-88"><a href="reproducible-research-1.html#cb28-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-89"><a href="reproducible-research-1.html#cb28-89" aria-hidden="true" tabindex="-1"></a>  db_gh2 <span class="sc">%&gt;%</span> </span>
<span id="cb28-90"><a href="reproducible-research-1.html#cb28-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(Cases, Deaths, <span class="at">col =</span> Country))<span class="sc">+</span></span>
<span id="cb28-91"><a href="reproducible-research-1.html#cb28-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> .<span class="dv">9</span>)<span class="sc">+</span></span>
<span id="cb28-92"><a href="reproducible-research-1.html#cb28-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">300000</span>, <span class="dv">50000</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, lim_x <span class="sc">+</span> <span class="dv">30000</span>), <span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb28-93"><a href="reproducible-research-1.html#cb28-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">40000</span>, <span class="dv">5000</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">40000</span>), <span class="at">labels =</span> comma)<span class="sc">+</span></span>
<span id="cb28-94"><a href="reproducible-research-1.html#cb28-94" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> lim_x, <span class="at">yend =</span> lim_x <span class="sc">*</span> .<span class="dv">02</span>, <span class="at">colour =</span> <span class="st">&quot;grey40&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb28-95"><a href="reproducible-research-1.html#cb28-95" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> lim_x, <span class="at">yend =</span> lim_x <span class="sc">*</span> .<span class="dv">05</span>, <span class="at">colour =</span> <span class="st">&quot;grey40&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb28-96"><a href="reproducible-research-1.html#cb28-96" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> lim_x, <span class="at">yend =</span> lim_x <span class="sc">*</span> .<span class="dv">10</span>, <span class="at">colour =</span> <span class="st">&quot;grey40&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb28-97"><a href="reproducible-research-1.html#cb28-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">xend =</span> lim_x, <span class="at">yend =</span> lim_x <span class="sc">*</span> .<span class="dv">15</span>, <span class="at">colour =</span> <span class="st">&quot;grey40&quot;</span>, <span class="at">size =</span> .<span class="dv">5</span>, <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb28-98"><a href="reproducible-research-1.html#cb28-98" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;2% CFR&quot;</span>, <span class="at">x =</span> lim_x <span class="sc">+</span> <span class="dv">1000</span>, <span class="at">y =</span> lim_x <span class="sc">*</span> .<span class="dv">02</span>,</span>
<span id="cb28-99"><a href="reproducible-research-1.html#cb28-99" aria-hidden="true" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> tx <span class="sc">*</span> .<span class="dv">3</span>, <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">lineheight =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb28-100"><a href="reproducible-research-1.html#cb28-100" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;5% CFR&quot;</span>, <span class="at">x =</span> lim_x <span class="sc">+</span> <span class="dv">1000</span>, <span class="at">y =</span> lim_x <span class="sc">*</span> .<span class="dv">05</span>,</span>
<span id="cb28-101"><a href="reproducible-research-1.html#cb28-101" aria-hidden="true" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> tx <span class="sc">*</span> .<span class="dv">3</span>, <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">lineheight =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb28-102"><a href="reproducible-research-1.html#cb28-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;10% CFR&quot;</span>, <span class="at">x =</span> lim_x <span class="sc">+</span> <span class="dv">1000</span>, <span class="at">y =</span> lim_x <span class="sc">*</span> .<span class="dv">10</span>,</span>
<span id="cb28-103"><a href="reproducible-research-1.html#cb28-103" aria-hidden="true" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> tx <span class="sc">*</span> .<span class="dv">3</span>, <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">lineheight =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb28-104"><a href="reproducible-research-1.html#cb28-104" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;15% CFR&quot;</span>, <span class="at">x =</span> lim_x <span class="sc">+</span> <span class="dv">1000</span>, <span class="at">y =</span> lim_x <span class="sc">*</span> .<span class="dv">15</span>,</span>
<span id="cb28-105"><a href="reproducible-research-1.html#cb28-105" aria-hidden="true" tabindex="-1"></a>             <span class="at">color=</span><span class="st">&quot;grey30&quot;</span>, <span class="at">size =</span> tx <span class="sc">*</span> .<span class="dv">3</span>, <span class="at">alpha =</span> .<span class="dv">6</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">lineheight =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb28-106"><a href="reproducible-research-1.html#cb28-106" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> cols)<span class="sc">+</span></span>
<span id="cb28-107"><a href="reproducible-research-1.html#cb28-107" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> labs, <span class="fu">aes</span>(Cases, Deaths, <span class="at">label =</span> Country),</span>
<span id="cb28-108"><a href="reproducible-research-1.html#cb28-108" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> tx <span class="sc">*</span> .<span class="dv">35</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-109"><a href="reproducible-research-1.html#cb28-109" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb28-110"><a href="reproducible-research-1.html#cb28-110" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Cases&quot;</span>, </span>
<span id="cb28-111"><a href="reproducible-research-1.html#cb28-111" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Deaths&quot;</span>)<span class="sc">+</span></span>
<span id="cb28-112"><a href="reproducible-research-1.html#cb28-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb28-113"><a href="reproducible-research-1.html#cb28-113" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb28-114"><a href="reproducible-research-1.html#cb28-114" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb28-115"><a href="reproducible-research-1.html#cb28-115" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="st">&quot;mm&quot;</span>),</span>
<span id="cb28-116"><a href="reproducible-research-1.html#cb28-116" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> tx),</span>
<span id="cb28-117"><a href="reproducible-research-1.html#cb28-117" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> tx),</span>
<span id="cb28-118"><a href="reproducible-research-1.html#cb28-118" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> tx <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb28-119"><a href="reproducible-research-1.html#cb28-119" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> tx <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb28-120"><a href="reproducible-research-1.html#cb28-120" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="portfolio_book_files/figure-html/line%20graph-1.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="reproducible-research-1.html#cb29-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Save</span></span>
<span id="cb29-2"><a href="reproducible-research-1.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsave</span>(<span class="st">&quot;files/COVID_article/Fig_1.jpg&quot;</span>, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">height =</span> <span class="dv">3</span>, <span class="at">dpi =</span> <span class="dv">600</span>)</span></code></pre></div>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-dudelMonitoringTrendsDifferences2020" class="csl-entry">
Dudel, Christian, Tim Riffe, Enrique Acosta, Alyson van Raalte, Cosmo Strozza, and Mikko Myrskylä. 2020. <span>“Monitoring Trends and Differences in <span>COVID-19</span> Case Fatality Rates Using Decomposition Methods: <span>Contributions</span> of Age Structure and Age-Specific Fatality.”</span> <span>SocArXiv</span>. <a href="https://doi.org/10.31235/osf.io/j4a3d">https://doi.org/10.31235/osf.io/j4a3d</a>.
</div>
<div id="ref-snefjellaHowEmotionLearned2020" class="csl-entry">
Snefjella, Bryor, Nadia Lana, and Victor Kuperman. 2020. <span>“How Emotion Is Learned: <span>Semantic</span> Learning of Novel Words in Emotional Contexts.”</span> <em>Journal of Memory and Language</em> 115 (December): 104171. <a href="https://doi.org/10.1016/j.jml.2020.104171">https://doi.org/10.1016/j.jml.2020.104171</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-management-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
